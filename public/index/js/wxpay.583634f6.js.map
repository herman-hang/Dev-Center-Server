{"version":3,"sources":["webpack:///./src/views/pay/Wxpay.vue?5bf7","webpack:///src/views/pay/Wxpay.vue","webpack:///./src/views/pay/Wxpay.vue?11c7","webpack:///./src/views/pay/Wxpay.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_v","_s","buyForm","price","attrs","class","isClass","directives","name","rawName","value","expression","trade_no","_f","create_time","on","detail","staticRenderFns","data","code_url","timer","created","getParams","methods","$route","params","undefined","$message","error","qrcode","width","height","text","colorDark","colorLight","correctLevel","mounted","wxpayReturn","$once","clearInterval","watch","component"],"mappings":"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","file":"js/wxpay.583634f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"body\"},[_vm._m(0),_c('div',{staticClass:\"mod-ct\"},[_c('div',{staticClass:\"order\"}),_c('div',{staticClass:\"amount\"},[_vm._v(\"￥ \"+_vm._s(_vm.buyForm.price))]),_c('div',{staticClass:\"qr-image\",attrs:{\"id\":\"qrcode\",\"title\":\"打开支付宝扫一扫\"}}),_c('div',{class:_vm.isClass ? 'detail detail-open' : 'detail',attrs:{\"id\":\"orderDetail\"}},[_c('dl',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isClass),expression:\"isClass\"}],staticClass:\"detail-ct\"},[_c('dt',[_vm._v(\"购买商品\")]),_c('dd',{attrs:{\"id\":\"productName\"}},[_vm._v(_vm._s(_vm.buyForm.name))]),_c('dt',[_vm._v(\"商户订单号\")]),_c('dd',{attrs:{\"id\":\"billId\"}},[_vm._v(_vm._s(_vm.buyForm.trade_no))]),_c('dt',[_vm._v(\"创建时间\")]),_c('dd',{attrs:{\"id\":\"createTime\"}},[_vm._v(_vm._s(_vm._f(\"date\")(_vm.buyForm.create_time)))])]),_c('a',{staticClass:\"arrow\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":_vm.detail}},[_c('i',{staticClass:\"ico-arrow\"})])]),_vm._m(1),_c('div',{staticClass:\"tip-text\"})]),_vm._m(2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',{staticClass:\"mod-title\"},[_c('span',{staticClass:\"ico-wechat\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"微信支付\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tip\"},[_c('span',{staticClass:\"dec dec-left\"}),_c('span',{staticClass:\"dec dec-right\"}),_c('div',{staticClass:\"ico-scan\"}),_c('div',{staticClass:\"tip-text\"},[_c('p',[_vm._v(\"请使用支付宝扫一扫\")]),_c('p',[_vm._v(\"扫描二维码完成支付\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"foot\"},[_c('div',{staticClass:\"inner\"},[_c('p',[_vm._v(\"手机用户可保存上方二维码到手机中\")]),_c('p',[_vm._v(\"在微信扫一扫中选择“相册”即可\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"body\">\r\n    <h1 class=\"mod-title\">\r\n      <span class=\"ico-wechat\"></span>\r\n      <span class=\"text\">微信支付</span>\r\n    </h1>\r\n    <div class=\"mod-ct\">\r\n      <div class=\"order\"></div>\r\n      <div class=\"amount\">￥ {{ buyForm.price }}</div>\r\n      <div class=\"qr-image\" id=\"qrcode\" title=\"打开支付宝扫一扫\"></div>\r\n      <div :class=\"isClass ? 'detail detail-open' : 'detail'\" id=\"orderDetail\">\r\n        <dl class=\"detail-ct\" v-show=\"isClass\">\r\n          <dt>购买商品</dt>\r\n          <dd id=\"productName\">{{ buyForm.name }}</dd>\r\n          <dt>商户订单号</dt>\r\n          <dd id=\"billId\">{{ buyForm.trade_no }}</dd>\r\n          <dt>创建时间</dt>\r\n          <dd id=\"createTime\">{{ buyForm.create_time | date }}</dd>\r\n        </dl>\r\n        <a href=\"javascript:void(0)\" class=\"arrow\" @click=\"detail\"><i class=\"ico-arrow\"></i></a>\r\n      </div>\r\n      <div class=\"tip\">\r\n        <span class=\"dec dec-left\"></span>\r\n        <span class=\"dec dec-right\"></span>\r\n        <div class=\"ico-scan\"></div>\r\n        <div class=\"tip-text\">\r\n          <p>请使用支付宝扫一扫</p>\r\n          <p>扫描二维码完成支付</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"tip-text\"></div>\r\n    </div>\r\n    <div class=\"foot\">\r\n      <div class=\"inner\">\r\n        <p>手机用户可保存上方二维码到手机中</p>\r\n        <p>在微信扫一扫中选择“相册”即可</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport '../../assets/css/wechat_pay.css';\r\nimport QRCode from 'qrcodejs2';\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 商品表单\r\n      buyForm: {\r\n        price: '',\r\n        name: '',\r\n        trade_no: '',\r\n        create_time: '',\r\n        code_url: ''\r\n      },\r\n      // 控制订单详情显示与隐藏\r\n      isClass: false,\r\n      // 定时器\r\n      timer: null\r\n    };\r\n  },\r\n  created() {\r\n    this.getParams();\r\n  },\r\n  methods: {\r\n    /**\r\n     *回调地址\r\n     */\r\n    async wxpayReturn() {\r\n      const { data: res } = await this.$http.get(this.buyForm.notify_url);\r\n      if (res.code !== 201) {\r\n        this.timer = setTimeout(this.wxpayReturn, 2000);\r\n      } else {\r\n        this.$message.success(res.msg);\r\n        this.$router.push('/authorization/list');\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 接收传过来的参数\r\n     */\r\n    getParams() {\r\n      if (this.$route.params.data !== '' && this.$route.params.data !== undefined && this.$route.params.data !== null) {\r\n        this.buyForm = this.$route.params.data;\r\n      } else {\r\n        this.$message.error('订单丢失，请重新下单！');\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 二维码生成\r\n     */\r\n    qrcode() {\r\n      const qrcode = new QRCode('qrcode', {\r\n        width: 230,\r\n        height: 230,\r\n        text: this.buyForm.code_url, // 二维码地址\r\n        colorDark: '#000000',\r\n        colorLight: '#ffffff',\r\n        correctLevel: QRCode.CorrectLevel.H\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 点击订单详情监听\r\n     */\r\n    detail() {\r\n      this.isClass = !this.isClass;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.qrcode();\r\n    this.wxpayReturn();\r\n    this.$once('hook:beforeDestroy', () => {\r\n      // 清除定时器\r\n      clearInterval(this.timer);\r\n    });\r\n  },\r\n  watch: {\r\n    // 监测路由变化,只要变化了就调用获取路由参数方法将数据存储本组件即可\r\n    $route: 'getParams'\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wxpay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wxpay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Wxpay.vue?vue&type=template&id=431d5144&scoped=true&\"\nimport script from \"./Wxpay.vue?vue&type=script&lang=js&\"\nexport * from \"./Wxpay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"431d5144\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}